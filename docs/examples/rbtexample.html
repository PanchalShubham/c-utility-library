<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta data -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Set Title -->
    <title>Utility Library | rbt.h - Example</title>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="../icon.png" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- highlight js-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css?family=Libre+Baskerville&display=swap');
        *{
            font-family: 'Libre Baskerville', serif;
        }
        body{
            background: white;
            color: black;
        }

        table {
            width: 100%;
            text-align: justify;
            border-collapse: collapse;
        }

        table, th, td {
            padding: 5px;
            font-size: 18px;
            border: 2px solid black;
        }
        table{
            margin-top: 10px;
        }
    </style>
</head>
<body>
<div class="container">
    <h3 style="padding-top: 50px;">utility/rbt.h - Example</h3>
    <p>[since release@2020.2]</p>
    <h1 style="border: 0.5px solid black;"></h1>
    <p>
        Implementation of (left-leaning) Red-Black-Tree! <br>
        RBT is <strong>not synchronized</strong>!<br>
        All operations are done in logarithmic time!<br>
    </p>
</div>

<div class="container">
    <h5 style="padding-top: 50px;">Example</h5>
    <pre><code>
/*include necessary headers*/
#include "../utility/release@2020.2/rbt.h"
#include "../utility/release@2020.2/linkedlist.h"


/*we define how our values to be compared*/
/*returns 1, 0 or -1 if object1 is greater than, equals to or smaller than object2*/
int rbtTestComparator(const void* object1, const void* object2){
    /*cast objects to their appropriate type - int in this case*/
    int val1 = *((int*)object1);
    int val2 = *((int*)object2);

    /*compare values and return appropriate result*/
    return (val1 > val2 ? 1 : val1 == val2 ? 0 : -1);
}


/*prints the in-order traversal of RBT rooted at root*/
void inOrderRBT(RBTNode* root){
    /*check if root is NULL*/
    if (root != NULL){
        /*first we apply in-order on left subtree*/
        inOrderRBT(root->left);
        /*next we visit root*/
        printf ("%d(%s) ", *((int*)root->data), root->color == RED ? "RED" : "BLACK");
        /*finally we apply in-order on right subtree*/
        inOrderRBT(root->right);
    }
}

/*prints the content of tree rooted at root in-order fashion*/
void printKeys(RBT* rbt){
    printf ("RBT Keys: ");
    /*create a new linked list and get the keys from rbt*/
    LinkedList* list = rbt_keys(rbt);
    /*create a new linked list iterator*/
    LinkedListIterator* iterator = new_linked_list_iterator(list);
    /*iterate through list and print its content to console*/
    while (linked_list_iterator_has_next(iterator)){
        /*get data from iterator and shift iterator to next node*/
        void* temp = linked_list_iterator_next(iterator);
        /*process data*/
        printf ("%d ", *((int*)temp));
    }
    printf ("\n");
    /*free memory allocated to list iterator*/
    free_linked_list_iterator(iterator);
    /*free memory allocated to list*/
    /*NOTE we set freeListKeys to false because keys are stored in RBT*/
    /*if we delete them then they will also be deleted from RBT*/
    free_linked_list(list, false);
}

/*performs a test on RBT*/
void performRBTTest(){
    /*create a new RBT*/
    RBT* rbt = new_rbt();
    /*keys for insertion in RBT*/
    int keys[] = {38, 19, 12, 8, 3, 15, 31, 25, 20, 23, 27, 35, 32, 37, 41, 40, 45};
    int size = 17;

    /*insert the following elements in RBT*/
    for (int i = 0; i < size; ++i){
        /*insert ith element in rbt*/
        bool insertionResult = rbt_put(rbt, wrap_int(keys[i]), rbtTestComparator, true);
        /*print the status of tree at the end of insertion*/
        printf ("inserted %d? %s...rbt status\n", keys[i], insertionResult ? "true" : "false");
        /*print the status of rbt to console with colors of node*/
        inOrderRBT(rbt->root); printf ("\n");
    }

    /*print the size of the rbt to console*/
    printf ("size: %d\n", rbt_size(rbt));
    /*print the height of the rbt to console*/
    printf ("height: %d\n", rbt_height(rbt));
    /*prints the maximum node in rbt*/
    printf ("max: %d\n", wrapped_int_value(rbt_max(rbt)));
    /*prints the minimum node in rbt*/
    printf ("min: %d\n", wrapped_int_value(rbt_min(rbt)));


    /*prints the floor of node 10 in rbt*/
    /*note that we set freeKeyAtEnd to true to free memory allocated to 12 on heap*/
    printf ("floor of 10: %d\n", wrapped_int_value(rbt_floor(rbt, wrap_int(10), rbtTestComparator, true)));
    /*prints the ceil of node 10 in rbt*/
    /*note that we set freeKeyAtEnd to true to free memory allocated to 12 on heap*/
    printf ("ceil of 10: %d\n", wrapped_int_value(rbt_ceil(rbt, wrap_int(10), rbtTestComparator, true)));

    /*print the rank of node 12 i.e. number of nodes in tree which are less than 12*/
    /*note that we set freeKeyAtEnd to true to free memory allocated to 12 on heap*/
    printf ("rank of 12: %d\n", rbt_rank(rbt, wrap_int(12), rbtTestComparator, true));

    /*check if 12 exist in rbt - note we set freeKeyAtEnd to true so that we can free memory allocated to key 12 on heap*/
    printf ("contains 12? %s\n", rbt_contains(rbt, wrap_int(12), rbtTestComparator, true) ? "true" : "false");
    /*check if 100 exist in rbt - note that we set freeKeyAtEnd to true so that we can free memory allocated to key 100 on heap*/
    printf ("contains 100? %s\n", rbt_contains(rbt, wrap_int(100), rbtTestComparator, true) ? "true" : "false");


    /*print the keys stored in rbt*/
    printKeys(rbt);

    /*delete the minimum key in rbt*/
    void* minimum = rbt_remove_min(rbt);
    /*print the value to console*/
    printf ("deleted min: %d...tree status\n", unwrap_int(minimum));
    /*print the status of tree to console*/
    inOrderRBT(rbt->root); printf ("\n");

    /*delete the maximum key in rbt*/
    void* maximum = rbt_remove_max(rbt);
    /*print the value to console*/
    printf ("deleted max: %d...tree status\n", unwrap_int(maximum));
    /*print the status of tree to console*/
    inOrderRBT(rbt->root); printf ("\n");

    /*print the keys stored in rbt*/
    printKeys(rbt);

    /*delete the node containing the value 38 in rbt*/
    void* deleteResultFor38 = rbt_remove(rbt, wrap_int(38), rbtTestComparator, true);
    printf ("deleted %d...tree status\n", unwrap_int(deleteResultFor38));
    /*print the status of tree to console*/
    inOrderRBT(rbt->root); printf ("\n");

    /*delete the node containing the value 27 in rbt*/
    void* deleteResultFor27 = rbt_remove(rbt, wrap_int(27), rbtTestComparator, true);
    printf ("deleted %d...tree status\n", unwrap_int(deleteResultFor27));
    /*print the status of tree to console*/
    inOrderRBT(rbt->root); printf ("\n");

    /*print the new size of rbt to console*/
    printf ("size: %d\n", rbt_size(rbt));

    /*free memory allocated to rbt*/
    /*also free the memory allocated to integers on heap*/
    free_rbt(rbt, true);
    printf ("Freed memory allocated to rbt :-)\n");
}
    </code></pre>
</div>
<div class="container">
    <h5 style="padding-top: 50px;">Sample output</h5>
    <div style="background: #F0F0F0; padding: 10px;">
        inserted 38? true...rbt status <br>
        38(BLACK) <br>
        inserted 19? true...rbt status <br>
        19(RED) 38(BLACK) <br>
        inserted 12? true...rbt status <br>
        12(BLACK) 19(BLACK) 38(BLACK) <br>
        inserted 8? true...rbt status <br>
        8(RED) 12(BLACK) 19(BLACK) 38(BLACK) <br>
        inserted 3? true...rbt status <br>
        3(BLACK) 8(RED) 12(BLACK) 19(BLACK) 38(BLACK) <br>
        inserted 15? true...rbt status <br>
        3(BLACK) 8(RED) 12(RED) 15(BLACK) 19(BLACK) 38(BLACK) <br>
        inserted 31? true...rbt status <br>
        3(BLACK) 8(RED) 12(RED) 15(BLACK) 19(BLACK) 31(RED) 38(BLACK) <br>
        inserted 25? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 25(BLACK) 31(BLACK) 38(BLACK) <br>
        inserted 20? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 20(RED) 25(BLACK) 31(BLACK) 38(BLACK) <br>
        inserted 23? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 20(BLACK) 23(RED) 25(BLACK) 31(BLACK) 38(BLACK) <br>
        inserted 27? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 20(BLACK) 23(RED) 25(RED) 27(BLACK) 31(BLACK) 38(BLACK) <br>
        inserted 35? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 20(BLACK) 23(RED) 25(RED) 27(BLACK) 31(BLACK) 35(RED) 38(BLACK) <br>
        inserted 32? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(BLACK) 38(BLACK) <br>
        inserted 37? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(BLACK) 37(RED) 38(BLACK) <br>
        inserted 41? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(RED) 37(BLACK) 38(BLACK) 41(BLACK) <br>
        inserted 40? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(RED) 37(BLACK) 38(BLACK) 40(RED) 41(BLACK) <br>
        inserted 45? true...rbt status <br>
        3(BLACK) 8(BLACK) 12(RED) 15(BLACK) 19(BLACK) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(BLACK) 37(BLACK) 38(BLACK) 40(BLACK) 41(BLACK) 45(BLACK) <br>
        size: 17 <br>
        height: 4 <br>
        max: 45 <br>
        min: 3 <br>
        floor of 10: 8 <br>
        ceil of 10: 12 <br>
        rank of 12: 2 <br>
        contains 12? true <br>
        contains 100? false <br>
        RBT Keys: 31 19 38 8 23 35 41 3 15 20 27 32 37 40 45 12 25 <br>
        deleted min: 3...tree status <br>
        8(BLACK) 12(BLACK) 15(BLACK) 19(BLACK) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(BLACK) 37(BLACK) 38(BLACK) 40(BLACK) 41(BLACK) 45(BLACK) <br>
        deleted max: 45...tree status <br>
        8(BLACK) 12(BLACK) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(RED) 37(BLACK) 38(BLACK) 40(RED) 41(BLACK) <br>
        RBT Keys: 31 19 38 12 23 35 41 8 15 20 27 32 37 40 25 <br>
        deleted 38...tree status <br>
        8(BLACK) 12(BLACK) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(RED) 27(BLACK) 31(BLACK) 32(BLACK) 35(RED) 37(BLACK) 40(BLACK) 41(BLACK) <br>
        deleted 27...tree status <br>
        8(BLACK) 12(BLACK) 15(BLACK) 19(RED) 20(BLACK) 23(BLACK) 25(BLACK) 31(BLACK) 32(BLACK) 35(RED) 37(BLACK) 40(BLACK) 41(BLACK) <br>
        size: 13 <br>
        Freed memory allocated to rbt :-) <br>
    </div>
</div>

<div class="container">
    <h1 style="border: 0.5px solid black; margin-top: 50px;"></h1>
    <p style="text-align: center">
        Copyright (C) 2020 <a href="http://shubhampanchal.herokuapp.com">Shubham Panchal</a> - All rights reserved<br>
        <a href="../../license.txt">GNU General Public License</a> <br>
    </p>
</div>
</body>
</html>